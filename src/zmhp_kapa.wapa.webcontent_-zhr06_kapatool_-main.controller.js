sap.ui.controller("zhr06_kapatool.main", {                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
	/**                                                                                                                                                                                                                                                           
	 * Called when a controller is instantiated and its View controls (if                                                                                                                                                                                         
	 * available) are already created. Can be used to modify the View before it                                                                                                                                                                                   
	 * is displayed, to bind event handlers and do other one-time                                                                                                                                                                                                 
	 * initialization.                                                                                                                                                                                                                                            
	 *&nbsp;                                                                                                                                                                                                                                                      
	 * @memberOf zhr06_kapatool.main                                                                                                                                                                                                                              
	 */                                                                                                                                                                                                                                                           
	onInit : function() {                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		// Initialize the views                                                                                                                                                                                                                                      
		// var arrViewNames = ["tree", "planning", "employee", "chart"]; //                                                                                                                                                                                          
		var arrViewNames = [                                                                                                                                                                                                                                         
			"tree", "planning"//, "chart"                                                                                                                                                                                                                               
		];                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		for ( var i in arrViewNames) {                                                                                                                                                                                                                               
			var sViewName = arrViewNames[i];                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			var oView = sap.ui.getCore().byId(sViewName);                                                                                                                                                                                                               
			if (oView == undefined)                                                                                                                                                                                                                                     
				oView = new sap.ui.view({                                                                                                                                                                                                                                  
					id : sViewName,                                                                                                                                                                                                                                           
					viewName : "zhr06_kapatool." + sViewName,                                                                                                                                                                                                                 
					type : sap.ui.core.mvc.ViewType.JS                                                                                                                                                                                                                        
				});                                                                                                                                                                                                                                                        
			// this.addContent(oViewTree);                                                                                                                                                                                                                              
		}                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
	},                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
	/**                                                                                                                                                                                                                                                           
	 * Similar to onAfterRendering, but this hook is invoked before the                                                                                                                                                                                           
	 * controller's View is re-rendered (NOT before the first rendering!                                                                                                                                                                                          
	 * onInit() is used for that one!).                                                                                                                                                                                                                           
	 *&nbsp;                                                                                                                                                                                                                                                      
	 * @memberOf zhr06_kapatool.main                                                                                                                                                                                                                              
	 */                                                                                                                                                                                                                                                           
	// onBeforeRendering: function() {                                                                                                                                                                                                                            
	//                                                                                                                                                                                                                                                            
	// },                                                                                                                                                                                                                                                         
	/**                                                                                                                                                                                                                                                           
	 * Called when the View has been rendered (so its HTML is part of the                                                                                                                                                                                         
	 * document). Post-rendering manipulations of the HTML could be done here.                                                                                                                                                                                    
	 * This hook is the same one that SAPUI5 controls get after being rendered.                                                                                                                                                                                   
	 *&nbsp;                                                                                                                                                                                                                                                      
	 * @memberOf zhr06_kapatool.main                                                                                                                                                                                                                              
	 */                                                                                                                                                                                                                                                           
	// onAfterRendering: function() {                                                                                                                                                                                                                             
	//                                                                                                                                                                                                                                                            
	// },                                                                                                                                                                                                                                                         
	/**                                                                                                                                                                                                                                                           
	 * Called when the Controller is destroyed. Use this one to free resources                                                                                                                                                                                    
	 * and finalize activities.                                                                                                                                                                                                                                   
	 *&nbsp;                                                                                                                                                                                                                                                      
	 * @memberOf zhr06_kapatool.main                                                                                                                                                                                                                              
	 */                                                                                                                                                                                                                                                           
	// onExit: function() {                                                                                                                                                                                                                                       
	//                                                                                                                                                                                                                                                            
	// },                                                                                                                                                                                                                                                         
	getMasterdata : function() {                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
		var dfd = $.Deferred();                                                                                                                                                                                                                                      
		// var sServiceUrl =                                                                                                                                                                                                                                         
		// "/sap/opu/odata/sap/ZHR06_KAPATOOL_SRV/MasterDataSet('1')?$format=json";                                                                                                                                                                                  
		var sServiceUrl = "/sap/opu/odata/SAP/ZMHP_KAPAZITAETSPLANUNG_SRV/MasterDataSet('1')?$format=json";                                                                                                                                                          
                                                                                                                                                                                                                                                               
		var post = $.ajax({                                                                                                                                                                                                                                          
			url : sServiceUrl,                                                                                                                                                                                                                                          
			type : "GET",                                                                                                                                                                                                                                               
		});                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
		post.done(function(data) {                                                                                                                                                                                                                                   
			dfd.resolve(data);                                                                                                                                                                                                                                          
		});                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
		post.fail(function() {                                                                                                                                                                                                                                       
			dfd.resolve(null);                                                                                                                                                                                                                                          
		});                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
		return dfd.promise();                                                                                                                                                                                                                                        
	},                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
	getSelectionDropdowns : function() {                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
		// BUKRS                                                                                                                                                                                                                                                     
		// var oModelBuKr = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                       
		// //                                                                                                                                                                                                                                                        
		// oModelBuKr.loadData("/sap/opu/odata/SAP/ZHR06_KAPATOOL_SRV/BuchungskreisSet?$format=json");                                                                                                                                                               
		// oModelBuKr.loadData("/sap/opu/odata/SAP/ZMHP_KAPAZITAETSPLANUNG_SRV/BuchungskreisSet?$format=json");                                                                                                                                                      
		//                                                                                                                                                                                                                                                           
		// var oDropdownBukrs = new sap.ui.commons.DropdownBox("BukrsDropdown",                                                                                                                                                                                      
		// {                                                                                                                                                                                                                                                         
		// width : "70%",                                                                                                                                                                                                                                            
		// text : "{BukrsShort}",                                                                                                                                                                                                                                    
		// change : function(oEvent) {                                                                                                                                                                                                                               
		// var oBuKrVal = sap.ui.getCore().byId("LocationDropdown");                                                                                                                                                                                                 
		// oBuKrVal.setValue("");                                                                                                                                                                                                                                    
		// var oLocVal = sap.ui.getCore().byId("OrgDropdown");                                                                                                                                                                                                       
		// oLocVal.setValue("");                                                                                                                                                                                                                                     
		// var oOrgVal = sap.ui.getCore().byId("CostDropdown");                                                                                                                                                                                                      
		// oOrgVal.setValue("");                                                                                                                                                                                                                                     
		// }                                                                                                                                                                                                                                                         
		// });                                                                                                                                                                                                                                                       
		//                                                                                                                                                                                                                                                           
		// oDropdownBukrs.setModel(oModelBuKr);                                                                                                                                                                                                                      
		// // console.log(oDropdownBukrs);                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		// var oItemTemplateBukrs = new sap.ui.core.ListItem({                                                                                                                                                                                                       
		// text : "{BukrsShort}"                                                                                                                                                                                                                                     
		// });                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
		// oDropdownBukrs.bindItems("/d/results", oItemTemplateBukrs);                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
		// Location                                                                                                                                                                                                                                                  
		// var oModelLoc = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                        
		// //                                                                                                                                                                                                                                                        
		// oModelLoc.loadData("/sap/opu/odata/SAP/ZHR06_KAPATOOL_SRV/LocationDropdownSet?$format=json");                                                                                                                                                             
		// oModelLoc.loadData("/sap/opu/odata/SAP/ZMHP_KAPAZITAETSPLANUNG_SRV/LocationDropdownSet?$format=json");                                                                                                                                                    
		//                                                                                                                                                                                                                                                           
		// var oDropdownLocation = new                                                                                                                                                                                                                               
		// sap.ui.commons.DropdownBox("LocationDropdown", {                                                                                                                                                                                                          
		// width : "70%",                                                                                                                                                                                                                                            
		// text : "{LocationShort}",                                                                                                                                                                                                                                 
		// change : function(oEvent) {                                                                                                                                                                                                                               
		// var oBuKrVal = sap.ui.getCore().byId("BukrsDropdown");                                                                                                                                                                                                    
		// oBuKrVal.setValue("");                                                                                                                                                                                                                                    
		// var oLocVal = sap.ui.getCore().byId("OrgDropdown");                                                                                                                                                                                                       
		// oLocVal.setValue("");                                                                                                                                                                                                                                     
		// var oOrgVal = sap.ui.getCore().byId("CostDropdown");                                                                                                                                                                                                      
		// oOrgVal.setValue("");                                                                                                                                                                                                                                     
		// }                                                                                                                                                                                                                                                         
		// });                                                                                                                                                                                                                                                       
		//                                                                                                                                                                                                                                                           
		// oDropdownLocation.setModel(oModelLoc);                                                                                                                                                                                                                    
		//                                                                                                                                                                                                                                                           
		// var oItemTemplateLoc = new sap.ui.core.ListItem({                                                                                                                                                                                                         
		// text : "{LocationShort}"                                                                                                                                                                                                                                  
		// });                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
		// oDropdownLocation.bindItems("/d/results", oItemTemplateLoc);                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
		// Org.-Unit                                                                                                                                                                                                                                                 
		var oModelOrg = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                           
		// oModelOrg.loadData("/sap/opu/odata/SAP/ZHR06_KAPATOOL_SRV/OrgehDropdownSet?$format=json");                                                                                                                                                                
		oModelOrg.loadData("/sap/opu/odata/SAP/ZMHP_KAPAZITAETSPLANUNG_SRV/OrgehDropdownSet?$format=json");                                                                                                                                                          
                                                                                                                                                                                                                                                               
		var oDropdownOrg = new sap.ui.commons.DropdownBox("OrgDropdown", {                                                                                                                                                                                           
			width : "70%",                                                                                                                                                                                                                                              
			text : "{OrgShort}",                                                                                                                                                                                                                                        
			change : function(oEvent) {                                                                                                                                                                                                                                 
				// var oBuKrVal = sap.ui.getCore().byId("BukrsDropdown");                                                                                                                                                                                                  
				// oBuKrVal.setValue("");                                                                                                                                                                                                                                  
				// var oLocVal = sap.ui.getCore().byId("LocationDropdown");                                                                                                                                                                                                
				// oLocVal.setValue("");                                                                                                                                                                                                                                   
				// var oOrgVal = sap.ui.getCore().byId("CostDropdown");                                                                                                                                                                                                    
				// oOrgVal.setValue("");                                                                                                                                                                                                                                   
			}                                                                                                                                                                                                                                                           
		});                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
		oDropdownOrg.setModel(oModelOrg);                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		var oItemTemplateOrg = new sap.ui.core.ListItem({                                                                                                                                                                                                            
			text : "{OrgShort}"                                                                                                                                                                                                                                         
		});                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
		oDropdownOrg.bindItems("/d/results", oItemTemplateOrg);                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
		// // Cost-Centres                                                                                                                                                                                                                                           
		// var oModelCost = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                       
		//                                                                                                                                                                                                                                                           
		// if (window.gRole == 'PC') {                                                                                                                                                                                                                               
		// //                                                                                                                                                                                                                                                        
		// oModelCost.loadData("/sap/opu/odata/SAP/ZHR06_KAPATOOL_SRV/CostCentreSet?$format=json");                                                                                                                                                                  
		// oModelCost.loadData("/sap/opu/odata/SAP/ZMHP_KAPAZITAETSPLANUNG_SRV/CostCentreSet?$format=json");                                                                                                                                                         
		// }                                                                                                                                                                                                                                                         
		//                                                                                                                                                                                                                                                           
		// var oDropdownCost = new sap.ui.commons.DropdownBox("CostDropdown", {                                                                                                                                                                                      
		// width : "70%",                                                                                                                                                                                                                                            
		// text : "{KostShort}",                                                                                                                                                                                                                                     
		// change : function(oEvent) {                                                                                                                                                                                                                               
		// var oBuKrVal = sap.ui.getCore().byId("BukrsDropdown");                                                                                                                                                                                                    
		// oBuKrVal.setValue("");                                                                                                                                                                                                                                    
		// var oLocVal = sap.ui.getCore().byId("LocationDropdown");                                                                                                                                                                                                  
		// oLocVal.setValue("");                                                                                                                                                                                                                                     
		// var oOrgVal = sap.ui.getCore().byId("OrgDropdown");                                                                                                                                                                                                       
		// oOrgVal.setValue("");                                                                                                                                                                                                                                     
		// }                                                                                                                                                                                                                                                         
		// });                                                                                                                                                                                                                                                       
		//                                                                                                                                                                                                                                                           
		// oDropdownCost.setModel(oModelCost);                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
		// var oItemTemplateCost = new sap.ui.core.ListItem({                                                                                                                                                                                                        
		// text : "{KostShort}"                                                                                                                                                                                                                                      
		// });                                                                                                                                                                                                                                                       
		//                                                                                                                                                                                                                                                           
		// oDropdownCost.bindItems("/d/results", oItemTemplateCost);                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
		// Kumulierte Ansicht                                                                                                                                                                                                                                        
		var oRB1 = new sap.ui.commons.RadioButton("FlagLevelOnly", {                                                                                                                                                                                                 
			text : oBundle.getText("ShellPaneBarLevel"),                                                                                                                                                                                                                
			group : 'idGroup1',                                                                                                                                                                                                                                         
			selected : true,                                                                                                                                                                                                                                            
			select : function() {                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
		});                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
		var oRB2 = new sap.ui.commons.RadioButton("FlagLevelAll", {                                                                                                                                                                                                  
			text : oBundle.getText("ShellPaneBarLevelAll"),                                                                                                                                                                                                             
			group : 'idGroup1',                                                                                                                                                                                                                                         
			select : function() {                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
		});                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
		// Layout - Build                                                                                                                                                                                                                                            
		var oLayoutCumuluiert = new sap.ui.commons.layout.MatrixLayout();                                                                                                                                                                                            
		oLayoutCumuluiert.setLayoutFixed(false);                                                                                                                                                                                                                     
		oLayoutCumuluiert.setColumns(2);                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
		oLayoutCumuluiert.createRow(oRB1);                                                                                                                                                                                                                           
		oLayoutCumuluiert.createRow(oRB2);                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		console.log(oLayoutCumuluiert);                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
		var oLayout1 = new sap.ui.layout.form.ResponsiveGridLayout();                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
		// Date in 6 Months                                                                                                                                                                                                                                          
		var sixMonths = new Date(); // today                                                                                                                                                                                                                         
		var x = 2; // months (akt. Monat zhlt nicht mit)                                                                                                                                                                                                            
		sixMonths.setMonth(sixMonths.getMonth() + x);                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
		var oForm1 = new sap.ui.layout.form.Form("viewSelection", {                                                                                                                                                                                                  
			layout : oLayout1,                                                                                                                                                                                                                                          
			formContainers : [                                                                                                                                                                                                                                          
				new sap.ui.layout.form.FormContainer({                                                                                                                                                                                                                     
					formElements : [                                                                                                                                                                                                                                          
						new sap.ui.layout.form.FormElement({                                                                                                                                                                                                                     
							label : oBundle.getText("ShellPaneBarVolume"),                                                                                                                                                                                                          
							fields : [                                                                                                                                                                                                                                              
								oLayoutCumuluiert                                                                                                                                                                                                                                      
							]                                                                                                                                                                                                                                                       
						}),                                                                                                                                                                                                                                                      
						new sap.ui.layout.form.FormElement({                                                                                                                                                                                                                     
							label : oBundle.getText("ShellPaneBarMonathFrom"),                                                                                                                                                                                                      
							fields : [                                                                                                                                                                                                                                              
								new sap.m.DateTimeInput("FromMonth", {                                                                                                                                                                                                                 
									width : "70%",                                                                                                                                                                                                                                        
									type : "Date",                                                                                                                                                                                                                                        
									displayFormat : "MM/yyyy",                                                                                                                                                                                                                            
									dateValue : new Date(),                                                                                                                                                                                                                               
									change : function(oEvent) {                                                                                                                                                                                                                           
										var oFromMonth = sap.ui.getCore().byId("FromMonth");                                                                                                                                                                                                 
										var fromValue = oFromMonth.getDateValue();                                                                                                                                                                                                           
										var oToMonth = sap.ui.getCore().byId("ToMonth");                                                                                                                                                                                                     
										var toValue = oToMonth.getDateValue();                                                                                                                                                                                                               
										if (fromValue > toValue || toValue < fromValue) {                                                                                                                                                                                                    
											jQuery.sap.require("sap.ui.commons.MessageBox");                                                                                                                                                                                                    
											sap.ui.commons.MessageBox.show("Beginndatum darf nicht kleiner als das Endedatum sein.",                                                                                                                                                            
												sap.ui.commons.MessageBox.Icon.ERROR);                                                                                                                                                                                                             
											oFromMonth.setDateValue(new Date());                                                                                                                                                                                                                
											oToMonth.setDateValue(sixMonths);                                                                                                                                                                                                                   
										}                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
									},                                                                                                                                                                                                                                                    
									layoutData : new sap.ui.layout.GridData({})                                                                                                                                                                                                           
								})                                                                                                                                                                                                                                                     
							]                                                                                                                                                                                                                                                       
						}),                                                                                                                                                                                                                                                      
						new sap.ui.layout.form.FormElement({                                                                                                                                                                                                                     
							label : oBundle.getText("ShellPaneBarMonathTo"),                                                                                                                                                                                                        
							fields : [                                                                                                                                                                                                                                              
								new sap.m.DateTimeInput("ToMonth", {                                                                                                                                                                                                                   
									width : "70%",                                                                                                                                                                                                                                        
									type : "Date",                                                                                                                                                                                                                                        
									displayFormat : "MM/yyyy",                                                                                                                                                                                                                            
									dateValue : sixMonths,                                                                                                                                                                                                                                
									change : function(oEvent) {                                                                                                                                                                                                                           
										var oFromMonth2 = sap.ui.getCore().byId("FromMonth");                                                                                                                                                                                                
										var fromValue2 = oFromMonth2.getDateValue();                                                                                                                                                                                                         
										var oToMonth2 = sap.ui.getCore().byId("ToMonth");                                                                                                                                                                                                    
										var toValue2 = oToMonth2.getDateValue();                                                                                                                                                                                                             
										if (fromValue2 > toValue2 || toValue2 < fromValue2) {                                                                                                                                                                                                
											jQuery.sap.require("sap.ui.commons.MessageBox");                                                                                                                                                                                                    
											sap.ui.commons.MessageBox.show("Beginndatum darf nicht kleiner als das Endedatum sein.",                                                                                                                                                            
												sap.ui.commons.MessageBox.Icon.ERROR);                                                                                                                                                                                                             
											oFromMonth2.setDateValue(new Date());                                                                                                                                                                                                               
											oToMonth2.setDateValue(sixMonths);                                                                                                                                                                                                                  
										}                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
									},                                                                                                                                                                                                                                                    
									layoutData : new sap.ui.layout.GridData({})                                                                                                                                                                                                           
								})                                                                                                                                                                                                                                                     
							]                                                                                                                                                                                                                                                       
						}),                                                                                                                                                                                                                                                      
						// new sap.ui.layout.form.FormElement({                                                                                                                                                                                                                  
						// label : oBundle.getText("ShellPaneBarCompCode"),                                                                                                                                                                                                      
						// fields : [                                                                                                                                                                                                                                            
						// oDropdownBukrs                                                                                                                                                                                                                                        
						// ]                                                                                                                                                                                                                                                     
						// }),                                                                                                                                                                                                                                                   
						// new sap.ui.layout.form.FormElement({                                                                                                                                                                                                                  
						// label : oBundle.getText("ShellPaneBarLocation"),                                                                                                                                                                                                      
						// fields : [                                                                                                                                                                                                                                            
						// oDropdownLocation                                                                                                                                                                                                                                     
						// ]                                                                                                                                                                                                                                                     
						// }),                                                                                                                                                                                                                                                   
						new sap.ui.layout.form.FormElement({                                                                                                                                                                                                                     
							label : oBundle.getText("ShellPaneBarOrg"),                                                                                                                                                                                                             
							fields : [                                                                                                                                                                                                                                              
								oDropdownOrg                                                                                                                                                                                                                                           
							]                                                                                                                                                                                                                                                       
						}),                                                                                                                                                                                                                                                      
						// new sap.ui.layout.form.FormElement("setVisibleCost",                                                                                                                                                                                                  
						// {                                                                                                                                                                                                                                                     
						// label : oBundle.getText("ShellPaneBarCost"),                                                                                                                                                                                                          
						// fields : [                                                                                                                                                                                                                                            
						// oDropdownCost                                                                                                                                                                                                                                         
						// ]                                                                                                                                                                                                                                                     
						// }),                                                                                                                                                                                                                                                   
						new sap.ui.layout.form.FormElement({                                                                                                                                                                                                                     
							label : oBundle.getText("ShellPaneBarSel"),                                                                                                                                                                                                             
							fields : [                                                                                                                                                                                                                                              
								new sap.ui.commons.Button({                                                                                                                                                                                                                            
									text : oBundle.getText("ShellPaneBarRepAkt"),                                                                                                                                                                                                         
									tooltip : "Reporting aktualisieren",                                                                                                                                                                                                                  
									press : function(oEvent) {                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
										// Show                                                                                                                                                                                                                                              
										// busy                                                                                                                                                                                                                                              
										// indicator                                                                                                                                                                                                                                         
										sap.ui.core.BusyIndicator.show(0);                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
										// Get                                                                                                                                                                                                                                               
										// Dropdown                                                                                                                                                                                                                                          
										// Value:                                                                                                                                                                                                                                            
										// Org.-Unit                                                                                                                                                                                                                                         
										var oOrgDropdown = sap.ui.getCore().byId("OrgDropdown");                                                                                                                                                                                             
										var sItemId = oOrgDropdown.getSelectedItemId();                                                                                                                                                                                                      
										console.log(sItemId);                                                                                                                                                                                                                                
										var sLength = sItemId.length;                                                                                                                                                                                                                        
										var sElement = sItemId.substring((sLength - 1), sLength);                                                                                                                                                                                            
										// console.log(sElement);                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
										var oJSON = new Array();                                                                                                                                                                                                                             
										oJSON = oOrgDropdown.getModel().getProperty("/d/results");                                                                                                                                                                                           
										// console.log(oJSON);                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
										var sOrgeh = oJSON[sElement].Orgeh;                                                                                                                                                                                                                  
										var sOrgehId = oJSON[sElement].OrgehDropdownID;                                                                                                                                                                                                      
										var sOrgLong = oJSON[sElement].OrgLong;                                                                                                                                                                                                              
										var sOrgShort = oJSON[sElement].OrgShort;                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
										// Get                                                                                                                                                                                                                                               
										// Dropdown                                                                                                                                                                                                                                          
										// Value:                                                                                                                                                                                                                                            
										// Location                                                                                                                                                                                                                                          
										// var oLocationDropdown =                                                                                                                                                                                                                           
										// sap.ui.getCore().byId("LocationDropdown");                                                                                                                                                                                                        
										// var sItemId =                                                                                                                                                                                                                                     
										// oLocationDropdown.getSelectedItemId();                                                                                                                                                                                                            
										// var sLength = sItemId.length;                                                                                                                                                                                                                     
										// var sElement =                                                                                                                                                                                                                                    
										// sItemId.substring((sLength - 1),                                                                                                                                                                                                                  
										// sLength);                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
										// var oJSON = new Array();                                                                                                                                                                                                                          
										// oJSON =                                                                                                                                                                                                                                           
										// oLocationDropdown.getModel().getProperty("/d/results");                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
										// var sLocationId =                                                                                                                                                                                                                                 
										// oJSON[sElement].LocationDropdownID;                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
										// Get                                                                                                                                                                                                                                               
										// Dropdown                                                                                                                                                                                                                                          
										// Value:                                                                                                                                                                                                                                            
										// Bukrs                                                                                                                                                                                                                                             
										// var oBukrsDropdown =                                                                                                                                                                                                                              
										// sap.ui.getCore().byId("BukrsDropdown");                                                                                                                                                                                                           
										// var sItemIdBukrs =                                                                                                                                                                                                                                
										// oBukrsDropdown.getSelectedItemId();                                                                                                                                                                                                               
										// var sLengthBukrs =                                                                                                                                                                                                                                
										// sItemIdBukrs.length;                                                                                                                                                                                                                              
										// var sElementBukrs =                                                                                                                                                                                                                               
										// sItemIdBukrs.substring((sLengthBukrs                                                                                                                                                                                                              
										// - 1), sLengthBukrs);                                                                                                                                                                                                                              
										//                                                                                                                                                                                                                                                   
										// var oJSONBukrs = new Array();                                                                                                                                                                                                                     
										// oJSONBukrs =                                                                                                                                                                                                                                      
										// oBukrsDropdown.getModel().getProperty("/d/results");                                                                                                                                                                                              
										//                                                                                                                                                                                                                                                   
										// var sBukrs =                                                                                                                                                                                                                                      
										// oJSONBukrs[sElementBukrs].Bukrs;                                                                                                                                                                                                                  
										// var sBukrsId =                                                                                                                                                                                                                                    
										// oJSONBukrs[sElementBukrs].BukrsID;                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
										// Get                                                                                                                                                                                                                                               
										// Dropdown                                                                                                                                                                                                                                          
										// Value:                                                                                                                                                                                                                                            
										// Costcentres                                                                                                                                                                                                                                       
										// var oCostDropdown =                                                                                                                                                                                                                               
										// sap.ui.getCore().byId("CostDropdown");                                                                                                                                                                                                            
										// var sItemIdCost =                                                                                                                                                                                                                                 
										// oCostDropdown.getSelectedItemId();                                                                                                                                                                                                                
										// var sLengthCost = sItemIdCost.length;                                                                                                                                                                                                             
										// var sElementCost =                                                                                                                                                                                                                                
										// sItemIdCost.substring((sLengthCost -                                                                                                                                                                                                              
										// 1), sLengthCost);                                                                                                                                                                                                                                 
										//                                                                                                                                                                                                                                                   
										// var oJSONCost = new Array();                                                                                                                                                                                                                      
										// oJSONCost =                                                                                                                                                                                                                                       
										// oCostDropdown.getModel().getProperty("/d/results");                                                                                                                                                                                               
										//                                                                                                                                                                                                                                                   
										// var sCostId;                                                                                                                                                                                                                                      
										// if (window.gRole == 'PC') {                                                                                                                                                                                                                       
										// sCostId =                                                                                                                                                                                                                                         
										// oJSONCost[sElementCost].KostID;                                                                                                                                                                                                                   
										// }                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
										// Von                                                                                                                                                                                                                                               
										// -                                                                                                                                                                                                                                                 
										// bis                                                                                                                                                                                                                                               
										// Monate                                                                                                                                                                                                                                            
										var oFromMonth = sap.ui.getCore().byId("FromMonth");                                                                                                                                                                                                 
										var sFromMonth = oFromMonth.getDateValue();                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
										var oToMonth = sap.ui.getCore().byId("ToMonth");                                                                                                                                                                                                     
										var sToMonth = oToMonth.getDateValue();                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
										// Kumulierte                                                                                                                                                                                                                                        
										// Ansicht                                                                                                                                                                                                                                           
										var oFlagLevelOnly = sap.ui.getCore().byId("FlagLevelOnly");                                                                                                                                                                                         
										var oFlagLevelAll = sap.ui.getCore().byId("FlagLevelAll");                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
										var sFlagLevelOnly = oFlagLevelOnly.getSelected();                                                                                                                                                                                                   
										var sFlagLevelAll = oFlagLevelAll.getSelected();                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
										// Variables                                                                                                                                                                                                                                         
										// fetched...                                                                                                                                                                                                                                        
										// console.log(sOrgeh);                                                                                                                                                                                                                              
										// //                                                                                                                                                                                                                                                
										// 50001111                                                                                                                                                                                                                                          
										// console.log(sBukrs);                                                                                                                                                                                                                              
										// //                                                                                                                                                                                                                                                
										// 0001                                                                                                                                                                                                                                              
										// console.log(sCost);                                                                                                                                                                                                                               
										// //                                                                                                                                                                                                                                                
										// 0001                                                                                                                                                                                                                                              
										console.log("sFlagLevel");                                                                                                                                                                                                                           
										// console.log(sFlagLevelOnly); // false                                                                                                                                                                                                             
										console.log(sFlagLevelAll); // true                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
										// Get                                                                                                                                                                                                                                               
										// selection                                                                                                                                                                                                                                         
										// paramters                                                                                                                                                                                                                                         
										var gOrgeh = sOrgeh;                                                                                                                                                                                                                                 
										// var gBukrs = sBukrs;                                                                                                                                                                                                                              
										var gEditable = 'X';                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
										var gCumulative = '';                                                                                                                                                                                                                                
										if (sFlagLevelAll == true) {                                                                                                                                                                                                                         
											gCumulative = 'X';                                                                                                                                                                                                                                  
										}                                                                                                                                                                                                                                                    
										else {                                                                                                                                                                                                                                               
											gCumulative = ''                                                                                                                                                                                                                                    
										}                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
										var gBegda = '';                                                                                                                                                                                                                                     
										var gEndda = '';                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
										var gBegdaYear = sFromMonth.getFullYear().toString();                                                                                                                                                                                                
										var gBegdaMonth = sFromMonth.getMonth() + 1;                                                                                                                                                                                                         
										if (gBegdaMonth < 10) {                                                                                                                                                                                                                              
											gBegdaMonth = '0' + gBegdaMonth.toString();                                                                                                                                                                                                         
										}                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
										var gBegdaDay = sFromMonth.getDate();                                                                                                                                                                                                                
										if (gBegdaDay < 10) {                                                                                                                                                                                                                                
											gBegdaDay = '0' + gBegdaDay.toString();                                                                                                                                                                                                             
										}                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
										gBegdaDay = gBegdaDay.toString();                                                                                                                                                                                                                    
										gBegdaMonth = gBegdaMonth.toString();                                                                                                                                                                                                                
										gBegda = gBegdaYear + gBegdaMonth + gBegdaDay;                                                                                                                                                                                                       
										gMonthYear = gBegdaMonth + '/' + gBegdaYear;                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
										var gEnddaYear = sToMonth.getFullYear().toString();                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
										var gEnddaMonth = sToMonth.getMonth() + 1;                                                                                                                                                                                                           
										if (gEnddaMonth < 10) {                                                                                                                                                                                                                              
											gEnddaMonth = '0' + gEnddaMonth.toString();                                                                                                                                                                                                         
										}                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
										var gEnddaDay = sToMonth.getDate();                                                                                                                                                                                                                  
										if (gEnddaDay < 10) {                                                                                                                                                                                                                                
											gEnddaDay = '0' + gEnddaDay.toString();                                                                                                                                                                                                             
										}                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
										gEnddaDay = gEnddaDay.toString();                                                                                                                                                                                                                    
										gEnddaMonth = gEnddaMonth.toString();                                                                                                                                                                                                                
										gEndda = gEnddaYear + gEnddaMonth + gEnddaDay;                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
										// Dates                                                                                                                                                                                                                                             
										// fetched...                                                                                                                                                                                                                                        
										// console.log(gBegda);                                                                                                                                                                                                                              
										// console.log(gEndda);                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
										// Fehlerhandling:                                                                                                                                                                                                                                   
										// nur                                                                                                                                                                                                                                               
										// ein                                                                                                                                                                                                                                               
										// Dropdown                                                                                                                                                                                                                                          
										var lOk = false;                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
										// console.log(window.gRole);                                                                                                                                                                                                                        
										// console.log(sOrgehId);                                                                                                                                                                                                                            
										// console.log(sLocationId);                                                                                                                                                                                                                         
										// console.log(sCostId);                                                                                                                                                                                                                             
										// console.log(sBukrsId);                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
										// if (window.gRole == 'PC') {                                                                                                                                                                                                                       
										// if ((sOrgehId == '0001' &&                                                                                                                                                                                                                        
										// sLocationId == '0001' && sCostId ==                                                                                                                                                                                                               
										// '0001' && sBukrsId != '0001')                                                                                                                                                                                                                     
										// || (sOrgehId == '0001' && sLocationId                                                                                                                                                                                                             
										// == '0001' && sCostId != '0001' &&                                                                                                                                                                                                                 
										// sBukrsId == '0001')                                                                                                                                                                                                                               
										// || (sOrgehId == '0001' && sLocationId                                                                                                                                                                                                             
										// != '0001' && sCostId == '0001' &&                                                                                                                                                                                                                 
										// sBukrsId == '0001')                                                                                                                                                                                                                               
										// || (sOrgehId != '0001' && sLocationId                                                                                                                                                                                                             
										// == '0001' && sCostId == '0001' &&                                                                                                                                                                                                                 
										// sBukrsId == '0001')) {                                                                                                                                                                                                                            
										//                                                                                                                                                                                                                                                   
										// lOk = true;                                                                                                                                                                                                                                       
										//                                                                                                                                                                                                                                                   
										// }                                                                                                                                                                                                                                                 
										// }                                                                                                                                                                                                                                                 
										// else {                                                                                                                                                                                                                                            
										// if ((sOrgehId == '0001' &&                                                                                                                                                                                                                        
										// sLocationId == '0001' && sBukrsId !=                                                                                                                                                                                                              
										// '0001')                                                                                                                                                                                                                                           
										// || (sOrgehId == '0001' && sLocationId                                                                                                                                                                                                             
										// == '0001' && sBukrsId == '0001')                                                                                                                                                                                                                  
										// || (sOrgehId == '0001' && sLocationId                                                                                                                                                                                                             
										// != '0001' && sBukrsId == '0001')                                                                                                                                                                                                                  
										// || (sOrgehId != '0001' && sLocationId                                                                                                                                                                                                             
										// == '0001' && sBukrsId == '0001')) {                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
										lOk = true;                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
										// }                                                                                                                                                                                                                                                 
										// }                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
										// Get selected tab                                                                                                                                                                                                                                  
										var oShell = sap.ui.getCore().byId("MainShell");                                                                                                                                                                                                     
										var sKey = oShell.getSelectedWorksetItem();                                                                                                                                                                                                          
										console.log(sKey);                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
										// Refill                                                                                                                                                                                                                                            
										if (lOk == true) {                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
											if (sKey == "TR") {                                                                                                                                                                                                                                 
												// Tab Kapazitt selected                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
												var oTreeView = sap.ui.getCore().byId("tree");                                                                                                                                                                                                     
												var oTreeTable = sap.ui.getCore().byId("dataTable");                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
												console.log(oTreeTable);                                                                                                                                                                                                                           
												if (oTreeTable != null) {                                                                                                                                                                                                                          
													oTreeTable.destroy();                                                                                                                                                                                                                             
												}                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
												var oParameters = {};                                                                                                                                                                                                                              
												oParameters.Begda = gBegda;                                                                                                                                                                                                                        
												oParameters.Endda = gEndda;                                                                                                                                                                                                                        
												oParameters.Cumulative = gCumulative;                                                                                                                                                                                                              
												// oParameters.Bukrs = sBukrs;                                                                                                                                                                                                                     
												// oParameters.Orgeh = sOrgeh;                                                                                                                                                                                                                     
												// oParameters.Location =                                                                                                                                                                                                                          
												// sLocationId;                                                                                                                                                                                                                                    
												// oParameters.Kostl = sCostId;                                                                                                                                                                                                                    
												console.log("Parameter");                                                                                                                                                                                                                          
												console.log(oParameters);                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
												oTreeTable = oTreeView.oController.getTreeTable(gBegda, gEndda, gEditable, gCumulative, gOrgeh,                                                                                                                                                    
													gBukrs);                                                                                                                                                                                                                                          
												//console.log(oTreeTable);                                                                                                                                                                                                                         
												$.when(oTreeView.oController.fillTreeTable(oTreeTable, oParameters)).then(function(oTreeTable) {                                                                                                                                                   
                                                                                                                                                                                                                                                               
													sap.ui.getCore().byId("MainShell").closePane();                                                                                                                                                                                                   
													oShell.setContent(oTreeTable);                                                                                                                                                                                                                    
													sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
												});                                                                                                                                                                                                                                                
											}                                                                                                                                                                                                                                                   
											else if (sKey == "PL") {                                                                                                                                                                                                                            
												// Tab Mitarbeiter selected                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
												var oPlanningView = sap.ui.getCore().byId("planning");                                                                                                                                                                                             
												var oTableEmpl = sap.ui.getCore().byId("selEmpTable");                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
												console.log(oTableEmpl);                                                                                                                                                                                                                           
												if (oTableEmpl != null) {                                                                                                                                                                                                                          
													oTableEmpl.destroy();                                                                                                                                                                                                                             
												}                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
												var oParameters = {};                                                                                                                                                                                                                              
												oParameters.Orgeh = sOrgeh;                                                                                                                                                                                                                        
												oParameters.MonthYear = gMonthYear;                                                                                                                                                                                                                
												oParameters.Cumulative = gCumulative;                                                                                                                                                                                                              
												// oParameters.Bukrs = sBukrs;                                                                                                                                                                                                                     
												// oParameters.Kostl = sCostId;                                                                                                                                                                                                                    
												// oParameters.Location =                                                                                                                                                                                                                          
												// sLocationId;                                                                                                                                                                                                                                    
												// oParameters.Editable =                                                                                                                                                                                                                          
												// gEditable;                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
												console.log("Parameter");                                                                                                                                                                                                                          
												console.log(oParameters);                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
												oTableEmpl = oPlanningView.oController.getEmployeePlanningTable();                                                                                                                                                                                 
												console.log(oTableEmpl)                                                                                                                                                                                                                            
												$.when(oPlanningView.oController.fillEmployeePlanningTable(oTableEmpl, oParameters)).then(                                                                                                                                                         
													function(oTableEmpl) {                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
														sap.ui.getCore().byId("MainShell").closePane();                                                                                                                                                                                                  
														oShell.setContent(oTableEmpl);                                                                                                                                                                                                                   
														sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
													});                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
											}                                                                                                                                                                                                                                                   
										}                                                                                                                                                                                                                                                    
										else if (sKey == "CH") {                                                                                                                                                                                                                             
											// Tab Mitarbeiter selected                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
										}                                                                                                                                                                                                                                                    
										else {                                                                                                                                                                                                                                               
											jQuery.sap.require("sap.ui.commons.MessageBox");                                                                                                                                                                                                    
											sap.ui.commons.MessageBox.show("Bitte nur ein Dropdown gleichzeitig und mindestens ein Dropdown whlen.",                                                                                                                                           
												sap.ui.commons.MessageBox.Icon.ERROR);                                                                                                                                                                                                             
											sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
										}                                                                                                                                                                                                                                                    
									}                                                                                                                                                                                                                                                     
								})                                                                                                                                                                                                                                                     
							]                                                                                                                                                                                                                                                       
						})                                                                                                                                                                                                                                                       
					]                                                                                                                                                                                                                                                         
				})                                                                                                                                                                                                                                                         
			]                                                                                                                                                                                                                                                           
		});                                                                                                                                                                                                                                                          
		if (window.gRole != 'PC') {                                                                                                                                                                                                                                  
			// var oVisCo = sap.ui.getCore().byId("setVisibleCost");                                                                                                                                                                                                    
			// oVisCo.setVisible(false);                                                                                                                                                                                                                                
		};                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		return oForm1;                                                                                                                                                                                                                                               
	},                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
	worksetItemSelected : function(oEvent) {                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
		this.removeAllContent();                                                                                                                                                                                                                                     
		var to = oEvent.getParameter("key");                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		// bugFix empty tree when new selection & back-nav                                                                                                                                                                                                           
		if (to == 'tree') {                                                                                                                                                                                                                                          
			var table = sap.ui.getCore().byId("dataTable");                                                                                                                                                                                                             
			var shell = sap.ui.getCore().byId("MainShell");                                                                                                                                                                                                             
			shell.setShowPane(true);                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
			if (table != null && shell != null) {                                                                                                                                                                                                                       
				shell.setContent(table);                                                                                                                                                                                                                                   
				// console.log("setting table");                                                                                                                                                                                                                           
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		}                                                                                                                                                                                                                                                            
		else if (to == 'chart') {                                                                                                                                                                                                                                    
			// alert(to + "selected");                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			var shell = sap.ui.getCore().byId("MainShell");                                                                                                                                                                                                             
			shell.setShowPane(false);                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
			var chartView = sap.ui.getCore().byId(to);                                                                                                                                                                                                                  
			if (chartView != null) {                                                                                                                                                                                                                                    
				chartView.destroy();                                                                                                                                                                                                                                       
				// console.log("chartView destroyed");                                                                                                                                                                                                                     
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		}                                                                                                                                                                                                                                                            
		else if (to == "planning") {                                                                                                                                                                                                                                 
			var shell = sap.ui.getCore().byId("MainShell");                                                                                                                                                                                                             
			shell.setShowPane(true);                                                                                                                                                                                                                                    
		}                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		var oView = sap.ui.getCore().byId(to);                                                                                                                                                                                                                       
		// console.log(oView);                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
		if (oView == undefined)                                                                                                                                                                                                                                      
			oView = new sap.ui.view({                                                                                                                                                                                                                                   
				id : to,                                                                                                                                                                                                                                                   
				viewName : "zhr06_kapatool." + to,                                                                                                                                                                                                                         
				type : sap.ui.core.mvc.ViewType.JS                                                                                                                                                                                                                         
			});                                                                                                                                                                                                                                                         
		this.addContent(oView);                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
	}                                                                                                                                                                                                                                                             
});                                                                                                                                                                                                                                                            