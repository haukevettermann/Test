sap.ui.controller("zhr06_kapatool.chart", {                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
	/**                                                                                                                                                                                                                                                           
	 * Called when a controller is instantiated and its View controls (if                                                                                                                                                                                         
	 * available) are already created. Can be used to modify the View before it                                                                                                                                                                                   
	 * is displayed, to bind event handlers and do other one-time                                                                                                                                                                                                 
	 * initialization.                                                                                                                                                                                                                                            
	 *&nbsp;                                                                                                                                                                                                                                                      
	 * @memberOf zhr06_kapatool.chart                                                                                                                                                                                                                             
	 */                                                                                                                                                                                                                                                           
	// onInit: function() {                                                                                                                                                                                                                                       
	//                                                                                                                                                                                                                                                            
	// },                                                                                                                                                                                                                                                         
	/**                                                                                                                                                                                                                                                           
	 * Similar to onAfterRendering, but this hook is invoked before the                                                                                                                                                                                           
	 * controller's View is re-rendered (NOT before the first rendering!                                                                                                                                                                                          
	 * onInit() is used for that one!).                                                                                                                                                                                                                           
	 *&nbsp;                                                                                                                                                                                                                                                      
	 * @memberOf zhr06_kapatool.chart                                                                                                                                                                                                                             
	 */                                                                                                                                                                                                                                                           
	// onBeforeRendering: function() {                                                                                                                                                                                                                            
	//                                                                                                                                                                                                                                                            
	// },                                                                                                                                                                                                                                                         
	/**                                                                                                                                                                                                                                                           
	 * Called when the View has been rendered (so its HTML is part of the                                                                                                                                                                                         
	 * document). Post-rendering manipulations of the HTML could be done here.                                                                                                                                                                                    
	 * This hook is the same one that SAPUI5 controls get after being rendered.                                                                                                                                                                                   
	 *&nbsp;                                                                                                                                                                                                                                                      
	 * @memberOf zhr06_kapatool.chart                                                                                                                                                                                                                             
	 */                                                                                                                                                                                                                                                           
	// onAfterRendering: function() {                                                                                                                                                                                                                             
	//                                                                                                                                                                                                                                                            
	// },                                                                                                                                                                                                                                                         
	/**                                                                                                                                                                                                                                                           
	 * Called when the Controller is destroyed. Use this one to free resources                                                                                                                                                                                    
	 * and finalize activities.                                                                                                                                                                                                                                   
	 *&nbsp;                                                                                                                                                                                                                                                      
	 * @memberOf zhr06_kapatool.chart                                                                                                                                                                                                                             
	 */                                                                                                                                                                                                                                                           
	// onExit: function() {                                                                                                                                                                                                                                       
	//                                                                                                                                                                                                                                                            
	// }                                                                                                                                                                                                                                                          
	transpose : function(oTreeAll) {                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
		var keys = [];                                                                                                                                                                                                                                               
		var i = 0;                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
		for ( var key in oTreeAll[i]) {                                                                                                                                                                                                                              
			keys.push(key);                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		for (var a = 0; a < 7; a++) {                                                                                                                                                                                                                                
			keys.shift();                                                                                                                                                                                                                                               
		}                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		for (var a = 0; a < 23; a++) {                                                                                                                                                                                                                               
			keys.pop();                                                                                                                                                                                                                                                 
		}                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		// console.log(keys);                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
		var newObj = {                                                                                                                                                                                                                                               
			d : []                                                                                                                                                                                                                                                      
		};                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		newObj['length'] = oTreeAll.length;                                                                                                                                                                                                                          
		for (var k = 0; k < oTreeAll.length; k++) {                                                                                                                                                                                                                  
			var obj = {};                                                                                                                                                                                                                                               
			for ( var cnt in keys) {                                                                                                                                                                                                                                    
				obj[keys[cnt]] = "";                                                                                                                                                                                                                                       
			}                                                                                                                                                                                                                                                           
			newObj.d.push(obj);                                                                                                                                                                                                                                         
		}                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		for (var k = 0; k < oTreeAll.length; k++) {                                                                                                                                                                                                                  
			for (var j = 0; j < oTreeAll.length; j++) {                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
				var temp = '';                                                                                                                                                                                                                                             
				if (oTreeAll[j][keys[k]] != null) {                                                                                                                                                                                                                        
					temp = oTreeAll[j][keys[k]].toString().replace(',', '.').replace('+', '').replace('-', '');                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
				// newObj.d[k][keys[j]] = oTreeAll[j][keys[k]];                                                                                                                                                                                                            
				newObj.d[k][keys[j]] = temp;                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
		}                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		// remove empty                                                                                                                                                                                                                                              
		var exportJSON = {                                                                                                                                                                                                                                           
			d : []                                                                                                                                                                                                                                                      
		};                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		for (var k = 0; k < newObj.length; k++) {                                                                                                                                                                                                                    
			if (newObj.d[k].Mon01 != '' && newObj.d[k].Mon01 != 'false') {                                                                                                                                                                                              
				// console.log("now");                                                                                                                                                                                                                                     
				// console.log(newObj.d[k]);                                                                                                                                                                                                                               
				exportJSON.d.push(newObj.d[k]);                                                                                                                                                                                                                            
			}                                                                                                                                                                                                                                                           
		}                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		// console.log(exportJSON);                                                                                                                                                                                                                                  
		return exportJSON;                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		// console.log(newObj);                                                                                                                                                                                                                                      
		// return newObj;                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
	},                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
	convertToFlat : function(oDataTable) {                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
		var oTreeJSON = oDataTable.getModel().getProperty("/root");                                                                                                                                                                                                  
		// console.log("oTreeJSONChart");                                                                                                                                                                                                                            
		// console.log(oTreeJSONChart);                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
		var oTreeAll = new Array();                                                                                                                                                                                                                                  
		var graphTitle = oTreeJSON[0].Title;                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		// convert to flat                                                                                                                                                                                                                                           
		for (var i = 0; i < oTreeJSON.length; i++) { // 1st                                                                                                                                                                                                          
			oTreeAll.push(oTreeJSON[i]);                                                                                                                                                                                                                                
			if (oTreeJSON[i].children.length > 0) {                                                                                                                                                                                                                     
				for (var d = 0; d < oTreeJSON[i].children.length; d++) { // 2nd                                                                                                                                                                                            
					oTreeAll.push(oTreeJSON[i].children[d]);                                                                                                                                                                                                                  
					if (oTreeJSON[i].children[d].children.length > 0) {                                                                                                                                                                                                       
						for (var e = 0; e < oTreeJSON[i].children[d].children.length; e++) {                                                                                                                                                                                     
							oTreeAll.push(oTreeJSON[i].children[d].children[e]);                                                                                                                                                                                                    
							if (oTreeJSON[i].children[d].children[e].children.length > 0) {                                                                                                                                                                                         
								for (var g = 0; g < oTreeJSON[i].children[d].children[e].children.length; g++) {                                                                                                                                                                       
									oTreeAll.push(oTreeJSON[i].children[d].children[e].children[g]);                                                                                                                                                                                      
								}                                                                                                                                                                                                                                                      
							}                                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
		}                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		var data = this.transpose(oTreeAll);                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		var dataset = new sap.viz.ui5.data.FlattenedDataset({                                                                                                                                                                                                        
			dimensions : [                                                                                                                                                                                                                                              
				{                                                                                                                                                                                                                                                          
					axis : 1,                                                                                                                                                                                                                                                 
					name : oBundle.getText("TreeTableColumnReport"),                                                                                                                                                                                                          
					value : "{Mon01}"                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			],                                                                                                                                                                                                                                                          
			measures : [                                                                                                                                                                                                                                                
				{                                                                                                                                                                                                                                                          
					name : "Plan",                                                                                                                                                                                                                                            
					value : '{Mon02}'                                                                                                                                                                                                                                         
				}, {                                                                                                                                                                                                                                                       
					name : "IST",                                                                                                                                                                                                                                             
					value : '{Mon03}'                                                                                                                                                                                                                                         
				},                                                                                                                                                                                                                                                         
			],                                                                                                                                                                                                                                                          
			data : {                                                                                                                                                                                                                                                    
				path : "/d"                                                                                                                                                                                                                                                
			}                                                                                                                                                                                                                                                           
		});                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
		var oChartModel = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                         
		oChartModel.setData(data);                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
		var combination = new sap.viz.ui5.Column("combiChart", {                                                                                                                                                                                                     
			width : "90%",                                                                                                                                                                                                                                              
			title : {                                                                                                                                                                                                                                                   
				visible : true,                                                                                                                                                                                                                                            
				text : graphTitle                                                                                                                                                                                                                                          
			},                                                                                                                                                                                                                                                          
			dataset : dataset,                                                                                                                                                                                                                                          
		});                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
		combination.setModel(oChartModel);                                                                                                                                                                                                                           
		sap.ui.core.BusyIndicator.hide();                                                                                                                                                                                                                            
		return combination;                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
	},                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
	getClickedMonth : function(dataset, column) {                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
		if (dataset.Mon01 == column) {                                                                                                                                                                                                                               
			return "Mon01";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon02 == column) {                                                                                                                                                                                                                               
			return "Mon02";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon03 == column) {                                                                                                                                                                                                                               
			return "Mon03";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon04 == column) {                                                                                                                                                                                                                               
			return "Mon04";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon05 == column) {                                                                                                                                                                                                                               
			return "Mon05";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon06 == column) {                                                                                                                                                                                                                               
			return "Mon06";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon07 == column) {                                                                                                                                                                                                                               
			return "Mon07";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon08 == column) {                                                                                                                                                                                                                               
			return "Mon08";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon09 == column) {                                                                                                                                                                                                                               
			return "Mon09";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon10 == column) {                                                                                                                                                                                                                               
			return "Mon10";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon11 == column) {                                                                                                                                                                                                                               
			return "Mon11";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon12 == column) {                                                                                                                                                                                                                               
			return "Mon12";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon13 == column) {                                                                                                                                                                                                                               
			return "Mon13";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon14 == column) {                                                                                                                                                                                                                               
			return "Mon14";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon15 == column) {                                                                                                                                                                                                                               
			return "Mon15";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon16 == column) {                                                                                                                                                                                                                               
			return "Mon16";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon17 == column) {                                                                                                                                                                                                                               
			return "Mon17";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon18 == column) {                                                                                                                                                                                                                               
			return "Mon18";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon19 == column) {                                                                                                                                                                                                                               
			return "Mon19";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon20 == column) {                                                                                                                                                                                                                               
			return "Mon20";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon21 == column) {                                                                                                                                                                                                                               
			return "Mon21";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon22 == column) {                                                                                                                                                                                                                               
			return "Mon22";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon23 == column) {                                                                                                                                                                                                                               
			return "Mon23";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
		if (dataset.Mon24 == column) {                                                                                                                                                                                                                               
			return "Mon24";                                                                                                                                                                                                                                             
		}                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
	},                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
});                                                                                                                                                                                                                                                            